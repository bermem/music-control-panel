<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Music Control Panel V1.3</title>

<style>
body{
  background:#0f0f0f;
  color:#ffffff;
  font-family:Arial, sans-serif;
  margin:40px;
}
h1{
  color:#00ffcc;
}
select,input,button,textarea{
  background:#1e1e1e;
  color:#ffffff;
  border:1px solid #333;
  padding:8px;
  margin:5px 0;
}
button{
  cursor:pointer;
}
#output{
  white-space:pre-wrap;
  background:#111;
  padding:15px;
  border:1px solid #333;
  margin-top:15px;
}
.section{
  margin-bottom:20px;
  padding:15px;
  border:1px solid #222;
}
</style>
</head>

<body>

<h1>ðŸŽ› AI Music Control Panel V1.3</h1>

<div class="section">
<h3>Song Setup</h3>

<input id="songTitle" placeholder="Song Title" />
<button onclick="generateTitle()">âœ¨ Auto Title</button>

<br>

<select id="version">
<option value="V1">V1 - Basic</option>
<option value="V2">V2 - Extended</option>
<option value="V3">V3 - Ultra Algorithm</option>
</select>

<select id="overrideLevel">
<option value="clean">Clean</option>
<option value="strong">Strong</option>
</select>

<br>
<button onclick="generate()">ðŸŽµ Generate Prompt</button>
<button onclick="copyOutput()">ðŸ“‹ Copy</button>
<button onclick="exportTXT()">ðŸ’¾ Export .txt</button>
</div>

<div class="section">
<h3>Saved Presets</h3>
<input id="presetName" placeholder="Preset Name"/>
<button onclick="savePreset()">Save Preset</button>
<select id="presetList"></select>
<button onclick="loadPreset()">Load</button>
</div>

<div class="section">
<h3>Prompt History</h3>
<select id="historyList"></select>
<button onclick="loadHistory()">Load Selected</button>
</div>

<div id="output"></div>

<script>

let history = JSON.parse(localStorage.getItem("promptHistory")) || [];
let presets = JSON.parse(localStorage.getItem("promptPresets")) || {};

function generateTitle(){
  const words=["Midnight","Neon","Broken","Echo","Forever","Dream","Electric","Shadow"];
  const random=words[Math.floor(Math.random()*words.length)];
  document.getElementById("songTitle").value=random+" Love";
}

function generate(){
  const title=document.getElementById("songTitle").value || "Untitled";
  const version=document.getElementById("version").value;
  const override=document.getElementById("overrideLevel").value;

  let structure="";
  if(version==="V1"){
    structure="Standard Verse / Chorus / Verse / Chorus";
  }
  if(version==="V2"){
    structure="Extended Structure with Pre-Chorus + Bridge";
  }
  if(version==="V3"){
    structure="Ultra Algorithm-Proof 6-7 min, Hook Repetition x3";
  }

  let overrideText="";
  if(override==="strong"){
    overrideText="\nOverride: Strong hook repetition, layered chorus, extended outro.";
  }

  const finalPrompt=
`Title: ${title}
Version: ${version}
Structure: ${structure}
${overrideText}

Genre: Modern Pop
Tempo: 90-110 BPM
Emotional Hook: Memorable, repeatable line`;

  document.getElementById("output").innerText=finalPrompt;

  history.push(finalPrompt);
  localStorage.setItem("promptHistory",JSON.stringify(history));
  updateHistory();
}

function copyOutput(){
  const text=document.getElementById("output").innerText;
  navigator.clipboard.writeText(text);
  alert("Copied!");
}

function exportTXT(){
  const text=document.getElementById("output").innerText;
  const blob=new Blob([text],{type:"text/plain"});
  const link=document.createElement("a");
  link.href=URL.createObjectURL(blob);
  link.download="prompt.txt";
  link.click();
}

function savePreset(){
  const name=document.getElementById("presetName").value;
  const version=document.getElementById("version").value;
  const override=document.getElementById("overrideLevel").value;

  presets[name]={version,override};
  localStorage.setItem("promptPresets",JSON.stringify(presets));
  updatePresetList();
}

function loadPreset(){
  const selected=document.getElementById("presetList").value;
  if(presets[selected]){
    document.getElementById("version").value=presets[selected].version;
    document.getElementById("overrideLevel").value=presets[selected].override;
  }
}

function updatePresetList(){
  const list=document.getElementById("presetList");
  list.innerHTML="";
  for(let key in presets){
    let option=document.createElement("option");
    option.value=key;
    option.text=key;
    list.appendChild(option);
  }
}

function updateHistory(){
  const list=document.getElementById("historyList");
  list.innerHTML="";
  history.forEach((item,index)=>{
    let option=document.createElement("option");
    option.value=index;
    option.text="Prompt "+(index+1);
    list.appendChild(option);
  });
}

function loadHistory(){
  const index=document.getElementById("historyList").value;
  document.getElementById("output").innerText=history[index];
}

updatePresetList();
updateHistory();

</script>

</body>
</html>
